# my-nalog

<img src="https://img.shields.io/pypi/v/my-nalog?style=flat-square" alt="PyPI version"> 
<img src="https://img.shields.io/badge/license-MIT-green?style=flat-square" alt="License">

Python –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API —Å–µ—Ä–≤–∏—Å–∞ "–ú–æ–π –ù–∞–ª–æ–≥" (lknpd.nalog.ru)

## üî• –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ SMS –∏–ª–∏ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é
- üßæ –°–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–æ–≤ (–ø—Ä–∏—Ö–æ–¥–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤)
- üîó –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–µ—á–∞—Ç–Ω—É—é —Ñ–æ—Ä–º—É —á–µ–∫–∞
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- üõ† –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install my-nalog
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ SMS

```python
from my_nalog import NalogRuAPI

api = NalogRuAPI()

# –ó–∞–ø—Ä–æ—Å SMS —Å –∫–æ–¥–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
sms_response = api.auth_by_sms("79991234567")  # –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ SMS
user_profile = api.verify_sms("123456", sms_response['challengeToken'])

print(f"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫: {user_profile.name}")
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –ø–∞—Ä–æ–ª—é

```python
from my_nalog import NalogRuAPI

api = NalogRuAPI()

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –ò–ù–ù –∏ –ø–∞—Ä–æ–ª—é
user_profile = api.auth_by_password("123456789012", "my_password")

print(f"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫: {user_profile.name}")
```

### C–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–∞

```python
# –°–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–∞ –Ω–∞ —Å—É–º–º—É 100.50 —Ä—É–±–ª–µ–π
receipt = api.create_receipt(100.50, "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏")

print(f"–ß–µ–∫ —Å–æ–∑–¥–∞–Ω: {receipt.uuid}")
print(f"–°—Å—ã–ª–∫–∞ –Ω–∞ —á–µ–∫: {receipt.link}")
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ö–ª–∞—Å—Å NalogRuAPI

##### –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.

#### –ú–µ—Ç–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

**auth_by_sms(phone: str) -> dict** - –∑–∞–ø—Ä–æ—Å SMS —Å –∫–æ–¥–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**verify_sms(code: str, challenge_token: str)** -> UserProfile - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ SMS

**auth_by_password(inn: str, password: str) -> UserProfile** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –ò–ù–ù –∏ –ø–∞—Ä–æ–ª—é

**logout()** - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

#### –†–∞–±–æ—Ç–∞ —Å —á–µ–∫–∞–º–∏:

**create_receipt(amount: float, description: str) -> Receipt** - —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–∞

**get_receipt_link(receipt_uuid: str) -> str** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —á–µ–∫

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

**is_authenticated() -> bool** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**_save_session()** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**_load_session()** - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### UserProfile

**inn: str** - –ò–ù–ù –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**phone: str** - —Ç–µ–ª–µ—Ñ–æ–Ω

**name: str** - –∏–º—è

**email: Optional[str]** - email

**snils: Optional[str]** - –°–ù–ò–õ–°

#### Receipt

**uuid: str** - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–µ–∫–∞

**amount: float** - —Å—É–º–º–∞

**description: str** - –æ–ø–∏—Å–∞–Ω–∏–µ

**created_at: datetime** - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

**link: str** - —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—á–∞—Ç–Ω—É—é —Ñ–æ—Ä–º—É

### ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:

**AuthError** - –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**SmsError** - –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å SMS

**ReceiptError** - –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —á–µ–∫–∞–º–∏

**SessionError** - –æ—à–∏–±–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏–µ–π

**NalogAPIError** - –æ–±—â–∏–µ –æ—à–∏–±–∫–∏ API

### üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/my-nalog.git
cd my-nalog
```

#### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -e .
```

#### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:

```bash
pytest
```

### ü§ù –£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ
#### –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è pull requests! –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue, —á—Ç–æ–±—ã –æ–±—Å—É–¥–∏—Ç—å, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å.

### üìú –õ–∏—Ü–µ–Ω–∑–∏—è
#### –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —Ñ–∞–π–ª–µ LICENSE.
